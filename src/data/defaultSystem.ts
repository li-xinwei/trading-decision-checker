import type { TradingSystemData } from '../types/decisionTree';
import { tradingDecisionTree } from './tradingTree';

export function getDefaultTradingSystem(): TradingSystemData {
  return {
    contextFilters: [
      {
        id: 'barbed_wire',
        name: '铁丝网 (Barbed Wire)',
        description: '紧凑震荡区间，多空完全平衡',
        conditions: [
          '最近3-5根K线高度重叠',
          'K线带有长长的上下影线（突出的尾巴）',
          '包含一个或多个十字星（Doji）',
          '20 EMA均线基本走平，且价格在均线上下穿梭',
        ],
        action: 'block',
        blockMessage: '当前处于铁丝网形态，这是最差的交易环境，任何setup都不适用。必须停止一切交易，耐心等待清晰的突破。',
      },
    ],

    treeConfig: tradingDecisionTree,

    tradersEquation: `# 交易者方程 (The Trader's Equation)

将交易与赌博区分开来的核心。系统在每次开仓前，必须强制计算三个变量：

## 公式底线

**成功的概率 × 潜在回报** 必须大于 **失败的概率 × 风险**

## 动态匹配盈亏比

### 高胜率交易（≥ 60%）
- 目标利润（Reward）至少等于初始风险（Risk）
- 典型场景：强趋势中的顺势回调

### 低胜率交易（约 40%）
- 目标利润必须至少是风险的 **2 倍**
- 典型场景：震荡区间逆势摸顶/抄底、主要趋势反转

> 算不过这笔账，系统就会过滤掉这笔交易。
`,

    riskManagement: `# 仓位与风险管理

## "我不在乎" 的仓位大小
将仓位缩小到 **即使打到初始止损，你也完全不会情绪失控** 的规模。如果止损位被迫放得很宽（如宽幅通道或强尖峰突破），必须相应缩小仓位。

## 保护性止损
每次下单 **必须同时挂好止损单**。希望和信念无法保护你免受市场反向波动的伤害。

## 分批止盈与移动止损

### 高胜率但利润空间不确定的交易
1. 获得 **1倍风险利润** 时平掉部分仓位（Scalp）
2. 将剩余仓位的止损移至 **保本位**
3. 博取波段利润（Swing）

### 止损移动规则
- 不要过早移动止损
- 等待价格创出新的结构高/低点后再调整
`,

    psychology: `# 心理风控与纪律

## 空仓测试 (The "I am flat" Test)
当持仓走势不符合预期时，问自己：
> "如果我现在是空仓，我还会愿意在这里建仓吗？"

如果答案是否定的，**立刻平仓**，绝不死扛。

## 无视外部噪音
- 屏蔽电视新闻、专家评论和复杂的指标
- "那些到处说的人其实不懂，懂的人不会说"
- 只相信眼前的 **图表和价格行为**

## 耐心与无聊的忍耐力
伟大交易员的第二重要特质就是 **能够连续数小时无所事事**：
- 不屈服于无聊
- 只等待最高胜率的系统信号出现
- 没有信号就 **不交易**

## 执行纪律
- 系统给出信号就执行，不加入主观判断
- 亏损是成本，不是失败
- 连续亏损后不要报复性交易
`,
  };
}
